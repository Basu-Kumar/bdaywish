<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Happy Birthday</title>
    <style>
      :root {
        --primary-gradient: linear-gradient(135deg, #0a2a43, #ff6f61);
        --text-color: white;
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        margin: 0;
        overflow: hidden;
        font-family: Arial, sans-serif;
        background: var(--primary-gradient);
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
        color: var(--text-color);
        position: relative;
      }

      .container {
        text-align: center;
        padding: 1rem;
        z-index: 2;
      }

      .countdown {
        font-size: clamp(3rem, 10vw, 6rem);
        opacity: 0;
        animation: fadeInOut 1s ease-in-out forwards;
      }

      h2 {
        font-size: clamp(2rem, 6vw, 3.5rem);
        opacity: 0;
        text-align: center;
      }

      @keyframes fadeInOut {
        0% {
          opacity: 0;
          transform: scale(0.5);
        }
        50% {
          opacity: 1;
          transform: scale(1.2);
        }
        100% {
          opacity: 0;
          transform: scale(1);
        }
      }

      @keyframes fadeInScale {
        0% {
          opacity: 0;
          transform: scale(0.5);
        }
        50% {
          transform: scale(1.2);
        }
        100% {
          opacity: 1;
          transform: scale(1);
        }
      }

      .balloon {
        width: clamp(30px, 8vw, 50px);
        height: clamp(42px, 11vw, 70px);
        background: radial-gradient(
          circle,
          var(--balloon-color, white) 0%,
          rgba(255, 255, 255, 0.7) 70%,
          transparent
        );
        position: absolute;
        border-radius: 50%;
        animation: float var(--float-duration, 6s) infinite ease-in-out;
        z-index: 1;
        transform-origin: center bottom;
      }

      .balloon::after {
        content: "";
        position: absolute;
        bottom: -20px;
        left: 50%;
        width: 2px;
        height: 20px;
        background: var(--balloon-color, white);
        transform: translateX(-50%);
      }

      @keyframes float {
        0%,
        100% {
          transform: translateY(0) rotate(0deg);
        }
        25% {
          transform: translateY(-50px) rotate(5deg);
        }
        50% {
          transform: translateY(-100px) rotate(-5deg);
        }
        75% {
          transform: translateY(-50px) rotate(5deg);
        }
      }

      .firework {
        position: absolute;
        width: clamp(5px, 2vw, 10px);
        height: clamp(5px, 2vw, 10px);
        border-radius: 50%;
        transform-origin: center;
        animation: firework-animation 2s ease-out infinite;
        pointer-events: none;
        z-index: 1;
      }

      @keyframes firework-animation {
        0% {
          opacity: 1;
          transform: scale(1) translate(0, 0);
          box-shadow: 0 0 20px 5px rgba(255, 255, 255, 0.8);
        }
        50% {
          opacity: 0.8;
        }
        100% {
          opacity: 0;
          transform: scale(3) translate(0, -100px);
          box-shadow: 0 0 40px 10px rgba(255, 255, 255, 0);
        }
      }

      .audio-controls {
        position: fixed;
        bottom: 20px;
        right: 20px;
        z-index: 1000;
        display: flex;
        gap: 10px;
        align-items: center;
        background: rgba(255, 255, 255, 0.2);
        padding: 10px;
        border-radius: 50px;
        backdrop-filter: blur(5px);
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      }

      .audio-btn {
        background: rgba(255, 255, 255, 0.9);
        border: none;
        width: 40px;
        height: 40px;
        border-radius: 50%;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.3s ease;
      }

      .audio-btn:hover {
        transform: scale(1.1);
        background: white;
      }

      .audio-btn svg {
        width: 24px;
        height: 24px;
      }

      .audio-btn.playing {
        background: #ff6f61;
      }

      .volume-control {
        width: 100px;
        height: 4px;
        -webkit-appearance: none;
        background: rgba(255, 255, 255, 0.3);
        border-radius: 2px;
        outline: none;
      }

      .volume-control::-webkit-slider-thumb {
        -webkit-appearance: none;
        width: 15px;
        height: 15px;
        border-radius: 50%;
        background: white;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .volume-control::-webkit-slider-thumb:hover {
        transform: scale(1.2);
      }

      /* Mobile Optimization */
      @media (max-width: 768px) {
        .balloon {
          --balloon-size: 30px;
          width: var(--balloon-size);
          height: calc(var(--balloon-size) * 1.4);
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1 id="countdown" class="countdown">3</h1>
      <h2 id="bday" style="animation: none; opacity: 0">
        Happy Birthday, Bhabhijaan...! ðŸŽ‰
      </h2>
    </div>

    <div class="audio-controls">
      <button class="audio-btn" id="playPauseBtn" aria-label="Play/Pause Music">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
        >
          <polygon points="5 3 19 12 5 21 5 3" class="play-icon" />
          <g class="pause-icon" style="display: none">
            <line x1="6" y1="4" x2="6" y2="20" />
            <line x1="18" y1="4" x2="18" y2="20" />
          </g>
        </svg>
      </button>
      <input
        type="range"
        class="volume-control"
        id="volumeControl"
        min="0"
        max="1"
        step="0.1"
        value="0.5"
      />
    </div>

    <audio id="bgMusic" preload="auto">
      <source
        src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3"
        type="audio/mpeg"
      />
      <source
        src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-2.mp3"
        type="audio/mpeg"
      />
      Your browser does not support the audio element.
    </audio>

    <script>
      // Balloon Generation
      const colors = [
        "#FF6F61",
        "#6B00B6",
        "#FFD700",
        "#1E90FF",
        "#32CD32",
        "#FF1493",
        "#00CED1",
        "#FFA500",
      ];

      function createBalloon(x, y) {
        const balloon = document.createElement("div");
        balloon.className = "balloon";
        const color = colors[Math.floor(Math.random() * colors.length)];
        balloon.style.setProperty("--balloon-color", color);

        balloon.style.left = x ? `${x}vw` : `${Math.random() * 90}vw`;
        balloon.style.bottom = y ? `${y}vh` : `-${Math.random() * 20}vh`;

        const duration = Math.random() * 4 + 5;
        balloon.style.setProperty("--float-duration", `${duration}s`);
        balloon.style.animationDelay = `${Math.random() * 5}s`;

        document.body.appendChild(balloon);

        setTimeout(() => {
          balloon.remove();
          createBalloon();
        }, duration * 1000);
      }

      function createBalloonGrid() {
        const cols = 10;
        const rows = 8;

        for (let i = 0; i < cols; i++) {
          for (let j = 0; j < rows; j++) {
            setTimeout(() => {
              createBalloon(
                i * (100 / cols) + (Math.random() * 5 - 2.5),
                j * (100 / rows) + (Math.random() * 5 - 2.5)
              );
            }, (i + j) * 200);
          }
        }
      }

      createBalloonGrid();

      setInterval(() => {
        if (document.querySelectorAll(".balloon").length < 50) {
          createBalloon();
        }
      }, 1000);

      // Fireworks
      function createFirework() {
        const firework = document.createElement("div");
        firework.className = "firework";

        firework.style.left = `${Math.random() * 90}vw`;
        firework.style.top = `${Math.random() * 60}vh`;

        const hue = Math.random() * 360;
        firework.style.background = `radial-gradient(circle, 
          hsl(${hue}, 100%, 70%), 
          hsl(${hue}, 100%, 60%), 
          transparent)`;

        document.body.appendChild(firework);
        setTimeout(() => firework.remove(), 2000);
      }

      setInterval(createFirework, Math.random() * 500 + 300);

      document.addEventListener("click", (e) => {
        const firework = document.createElement("div");
        firework.className = "firework";
        firework.style.left = `${e.clientX}px`;
        firework.style.top = `${e.clientY}px`;

        const hue = Math.random() * 360;
        firework.style.background = `radial-gradient(circle, 
          hsl(${hue}, 100%, 70%), 
          hsl(${hue}, 100%, 60%), 
          transparent)`;

        document.body.appendChild(firework);
        setTimeout(() => firework.remove(), 2000);
      });

      // Countdown Animation
      function startCountdown() {
        const countdown = document.getElementById("countdown");
        const bday = document.getElementById("bday");
        let count = 3;

        const countInterval = setInterval(() => {
          count--;
          if (count > 0) {
            countdown.style.animation = "none";
            countdown.offsetHeight; // Trigger reflow
            countdown.textContent = count;
            countdown.style.animation = "fadeInOut 1s ease-in-out forwards";
          } else if (count === 0) {
            countdown.textContent = count;
            countdown.style.animation = "fadeInOut 1s ease-in-out forwards";
            setTimeout(() => {
              countdown.remove();
              bday.style.animation = "fadeInScale 3s ease-in forwards";
            }, 1000);
            clearInterval(countInterval);
          }
        }, 1000);
      }

      // Start countdown immediately
      startCountdown();

      // Audio Control System
      const audio = document.getElementById("bgMusic");
      const playPauseBtn = document.getElementById("playPauseBtn");
      const volumeControl = document.getElementById("volumeControl");
      const playIcon = playPauseBtn.querySelector(".play-icon");
      const pauseIcon = playPauseBtn.querySelector(".pause-icon");

      audio.volume = 0.5;

      function togglePlay() {
        if (audio.paused) {
          const playPromise = audio.play();
          if (playPromise !== undefined) {
            playPromise
              .then((_) => {
                playIcon.style.display = "none";
                pauseIcon.style.display = "block";
                playPauseBtn.classList.add("playing");
              })
              .catch((error) => {
                console.log("Playback prevented by browser");
              });
          }
        } else {
          audio.pause();
          playIcon.style.display = "block";
          pauseIcon.style.display = "none";
          playPauseBtn.classList.remove("playing");
        }
      }

      playPauseBtn.addEventListener("click", togglePlay);
      volumeControl.addEventListener("input", (e) => {
        audio.volume = e.target.value;
      });

      audio.addEventListener("ended", function () {
        audio.currentTime = 0;
        audio.play().catch((e) => console.log("Autoplay prevented"));
      });

      document.body.addEventListener(
        "click",
        function initAudio() {
          togglePlay();
          document.body.removeEventListener("click", initAudio);
        },
        { once: true }
      );

      document.addEventListener("visibilitychange", () => {
        if (document.hidden) {
          audio.pause();
        }
      });

      document.addEventListener("touchstart", () => {
        const controls = document.querySelector(".audio-controls");
        controls.style.opacity = "1";
      });
    </script>
  </body>
</html>
